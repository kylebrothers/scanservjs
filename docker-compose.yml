version: "3"
services:
  scanservjs:
    image: sbs20/scanservjs:latest
    container_name: scanservjs-container
    ports:
      - "8080:8080"
    volumes:
      - ./scans:/var/lib/scanservjs/output
      - ./config:/etc/scanservjs
      - /var/run/dbus:/var/run/dbus
    devices:
      # You'll need to replace 001/003 with your actual USB bus/device numbers
      # Find these using: sudo sane-find-scanner -q
      - /dev/bus/usb/001/003:/dev/bus/usb/001/003
    # Add device group rule for USB access
    device_cgroup_rules:
      - 'c 189:* rmw'
    restart: unless-stopped
